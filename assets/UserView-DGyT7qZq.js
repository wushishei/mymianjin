import{t as e}from"./request-CMp-Rt37.js";import{C as t,E as n,M as r,O as i,P as a,S as o,_ as s,b as c,d as l,j as u,k as d,n as f,o as p,s as m,v as h,w as g,x as _,y as v}from"./index-DPV6HfP3.js";import{t as y}from"./moren-DywuXjrH.js";var b={class:`user-container`},x={class:`user-header`},S={class:`user-info-section`},C={class:`user-name`},w={class:`user-joined`},T={class:`user-functions`},E={class:`function-item`},D={class:`function-item`},O={class:`function-item`},k={class:`user-info-list`},A={class:`user-actions`},j=m(t({__name:`UserView`,setup(t){let m=p(),y=u(null),j=u(!0),M=async()=>{try{j.value=!0;let t=await e.get(`/auth/currentUser`,{headers:{Authorization:f()}});t.data.code===1e4?y.value=t.data.data:l(`获取用户信息失败`)}catch(e){console.error(`获取用户信息失败:`,e),l(`网络错误，请重试`),m.push(`/login`)}finally{j.value=!1}};g(()=>{M()});let N=()=>{localStorage.removeItem(`token`),l(`退出登录成功`),m.push(`/login`)};return(e,t)=>{let l=i(`van-cell`),u=i(`van-cell-group`),f=i(`van-button`),p=i(`van-loading`);return n(),c(`div`,b,[s(`div`,x,[t[3]||=s(`div`,{class:`avatar-section`},[s(`img`,{src:`/mymianjin/assets/moren-zJe3wZLf.png`,alt:``})],-1),s(`div`,S,[s(`h2`,C,a(y.value?.username||`未知用户`),1),s(`p`,w,`注册时间: `+a(y.value?.createdAt||``),1)])]),s(`div`,T,[s(`div`,E,[s(`div`,{class:`function-icon`,onClick:t[0]||=e=>r(m).push(`/my-articles`)},[...t[4]||=[s(`svg`,{width:`40`,height:`40`,viewBox:`0 0 40 40`,fill:`none`},[s(`circle`,{cx:`20`,cy:`20`,r:`18`,stroke:`#999`,"stroke-width":`2`}),s(`path`,{d:`M14 16V12H26V16H14ZM14 18V28H26V18H14ZM16 20H24V26H16V20Z`,fill:`#999`})],-1)]]),t[5]||=s(`div`,{class:`function-name`},`我的文章`,-1)]),s(`div`,D,[s(`div`,{class:`function-icon`,onClick:t[1]||=e=>r(m).push(`/collect`)},[...t[6]||=[s(`svg`,{width:`40`,height:`40`,viewBox:`0 0 40 40`,fill:`none`},[s(`circle`,{cx:`20`,cy:`20`,r:`18`,stroke:`#999`,"stroke-width":`2`}),s(`path`,{d:`M14 16L20 22L26 16V26H14V16Z`,fill:`#999`})],-1)]]),t[7]||=s(`div`,{class:`function-name`},`我的收藏`,-1)]),s(`div`,O,[s(`div`,{class:`function-icon`,onClick:t[2]||=e=>r(m).push(`/like`)},[...t[8]||=[s(`svg`,{width:`40`,height:`40`,viewBox:`0 0 40 40`,fill:`none`},[s(`circle`,{cx:`20`,cy:`20`,r:`18`,stroke:`#999`,"stroke-width":`2`}),s(`path`,{d:`M14 16C14 14 16 12 18 12H22C24 12 26 14 26 16V24C26 26 24 28 22 28H18C16 28 14 26 14 24V16Z`,fill:`#999`})],-1)]]),t[9]||=s(`div`,{class:`function-name`},`我的点赞`,-1)])]),s(`div`,k,[o(u,{inset:``},{default:d(()=>[o(l,{title:`用户ID`,value:y.value?.id||`-`},null,8,[`value`]),o(l,{title:`用户名`,value:y.value?.username||`-`},null,8,[`value`]),o(l,{title:`最后更新`,value:y.value?.updatedAt||`-`},null,8,[`value`])]),_:1})]),s(`div`,A,[o(f,{type:`danger`,block:``,onClick:N},{default:d(()=>[...t[10]||=[_(`退出登录`,-1)]]),_:1})]),j.value?(n(),h(p,{key:0,type:`spinner`,size:`40px`})):v(``,!0)])}}}),[[`__scopeId`,`data-v-f7934f97`]]);export{j as default};